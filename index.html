<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shared To-Do List</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
    <!-- Firebase Configuration -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCKl2rW_1V5zo2AOc6m7WE-nyXHDbaiaBc",
            authDomain: "todolist-ea49a.firebaseapp.com",
            databaseURL: "https://todolist-ea49a-default-rtdb.firebaseio.com",
            projectId: "todolist-ea49a",
            storageBucket: "todolist-ea49a.appspot.com",
            messagingSenderId: "735543643972",
            appId: "1:735543643972:web:d4ba8bab7252cbd25c1111",
            measurementId: "G-VZ04Z3QQ58"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>
</head>
<body>
    <h1>Our Shared To-Do List</h1>
    <input type="text" id="taskInput" placeholder="Add a new task...">
    <button onclick="addTask()">Add Task</button>
    <ul id="taskList"></ul>

    <script>
        // Full JavaScript for Shared To-Do List App with Firebase Integration

        // Connect to Firebase Realtime Database
        const db = firebase.database();

        function addTask() {
            const taskInput = document.getElementById('taskInput');

            if (taskInput.value.trim() !== '') {
                // Add a new task to Firebase
                const newTaskRef = db.ref('tasks').push();
                newTaskRef.set({
                    task: taskInput.value,
                    completed: false
                });
                taskInput.value = '';
            }
        }

        // Listen for real-time updates
        db.ref('tasks').on('value', (snapshot) => {
            const taskList = document.getElementById('taskList');
            taskList.innerHTML = ''; // Clear existing tasks
            snapshot.forEach((taskSnapshot) => {
                const taskData = taskSnapshot.val();
                const li = document.createElement('li');
                const taskText = document.createElement('span');
                taskText.textContent = taskData.task;

                if (taskData.completed) {
                    taskText.classList.add('completed');
                }
                li.appendChild(taskText);

                // Checkbox to mark task as completed
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = taskData.completed;
                checkbox.onclick = () => {
                    db.ref('tasks/' + taskSnapshot.key).update({
                        completed: checkbox.checked
                    });
                };
                li.insertBefore(checkbox, taskText);

                // Delete button
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Delete';
                deleteBtn.classList.add('delete-btn');
                deleteBtn.onclick = () => {
                    db.ref('tasks/' + taskSnapshot.key).remove();
                };
                li.appendChild(deleteBtn);

                taskList.appendChild(li);
            });
        });
    </script>
</body>
</html>
